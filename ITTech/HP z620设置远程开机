HP z620设置远程开机
 
买了一台Z620工作站，双至强E5 CPU，20核40线程，64G ECC内存，真香！只是800W的电源，耗电实在吃不消。为了解决省电难题，只能平时关机，要使用的时候远程唤醒开机，通过微软远程桌面登录使用后再关机。 
 
本文就来指导大家设置z620远程唤醒开机，其他型号的电脑或者Linux系统的设置类似，有兴趣的朋友也可以参考本文。
 
一般来说，远程唤醒是指局域网内，用一台联网的设备（可以是手机，电脑或者平板等），通过网络，向已关机的电脑发送一个命令包，由于已关机的电脑里的有线网卡依然处于供电待机状态，而没有被关闭，所以依然可以接收到这个命令包，让已关机的电脑进入开机流程，实现远程开机。
 
结合家用路由器的端口转发功能，我们也可以通过互联网实现远程开机，比如在办公室启动家里的电脑。
 
为了实现远程开机，我们把设置分成两步，第一步，我们首先实现局域网内的远程开机；第二步，再通过设置家里路由器，实现互联网远程开机。
 
第一步，实现局域网内的远程开机。我们需要在三个地方进行设置：1.z620电脑BIOS；2.windows操作系统设置；3.移动设备上的设置。
 
1.z620电脑BIOS设置：开机后按F10进入BIOS设置。和正常开机相比，远程开机必须的BIOS设置只有两处，这两处设置都是为了保证网卡在关机后依然处于通电状态，从而能够接受通过网络发送来的唤醒数据包。
(i)  BIOS->Power->Hardware Power Management->S5 Maximum Power Savings 选择Disable；
(ii) BIOS->Advanced->Device Options->S5 Wake on LAN 选择Enable。 

2.Windows10系统设置：Win10系统设置都在“控制面板”和“设置”里设置：
(i)  控制面板->系统和安全->电源选项->左侧 选择电源按钮的功能->关机设置 取消勾选“启用快速启动（推荐）”。如果无法取消勾选，先点页面上部的更改当前不可用设置，即可修改。
(ii) 控制面板->系统和安全->管理工具->计算机管理->设备管理器 点开右侧的网络适配器，会显示两块网卡Intel 82574L和Intel 82579LM。对两块网卡分别进行如下操作：双击网卡名称->电源管理。 勾选“允许计算机关闭此设备以节约电源”，“只允许魔幻数据包唤醒计算机”和“允许此设备唤醒计算机”。特别注意两块网卡都需要这么设置，否则有可能无法远程唤醒。
以上两步做完，z620关机后，如果插入网线，相应的网卡上的绿色提示灯应该是闪烁的。
(iii) 控制面板->网络和Internet->网络和共享中心->Local Area Connection(本地连接)->详细信息 记下物理地址和IPv4地址的数值，以备后用。

3.移动设备上的设置：其实不一定是移动设备，普通的台式机和笔记本电脑也可以向远程电脑发送远程开机的命令。发送远程开机命令，需要在移动设备上先安装一个WOL软件。我以安卓系统为例。在任意软件市场，搜索WOL，跳出很多软件，可以选择一个使用。我使用的是Mike Webb制作的Wake On Lan。
进入Wake On Lan主界面，点击右下角+号，点击右上角手工输入，名称随便设定，把前面获得的物理地址加入MAC地址；设备IP填入之前获得的IPv4数值；主机名/IP地址/广播地址 把设备IP最后字段改成255；端口填入9。保存后主界面就会出现刚才添加的设备。这时只要你的手机和电脑在一个局域网内，点击主界面内的设备名称，电脑就会被唤醒，自动开机。

第二步，实现通过互联网远程开机。在完成上述设置后，我们需要先设置路由器，然后在移动设备上在添加一个远程开机设备。
1.路由器设置。这一部分可以参考路由器的设置说明。进入路由器设置界面后，先设定动态域名。架设设置的动态域名是yourname.abc.com。然后设置端口转发，设置端口9转发到之前获得的IPv4的IP地址，保存重启路由器。ssh或者telnet到路由器，运行arp -s 设备IP地址  设备MAC地址。如果重启路由器，此命令需要重新运行。
2.移动设备上的设置：进入Wake On Lan主界面，点击右下角+号，点击右上角手工输入，名称随便设定，把前面获得的物理地址加入MAC地址；设备IP填入之前获得的动态域名yourname.abc.com；主机名/IP地址/广播地址 把设备IP最后字段改成255；端口填入9。保存后主界面就会出现刚才添加的设备。这时点击主界面内的设备名称，电脑就会被唤醒，自动开机。